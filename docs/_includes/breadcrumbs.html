<div id="breadcrumbs">
    {% assign crumbs = page.url | remove:'/index.html' | split: '/' %}
    <a href="/">Home</a>
    {% for crumb in crumbs offset: 1 %}
        {% unless crumb == "index.html" %}
            {% if forloop.last %}
                / {{ page.title }}
            {% else %}
                / <a href="{% assign crumb_limit = forloop.index | plus: 1 %}{% for crumb in crumbs limit: crumb_limit %}{% unless forloop.index > 3 %}{{ crumb | append: '/' }}{% endunless %}{% endfor %}">{{ crumb | replace:'-',' ' | remove:'.html' | capitalize }}</a>
            {% endif %}
        {% endunless %}
    {% endfor %}
</div>
